{% extends "layout.html" %}
{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-dark text-white py-3">
                    <h5 class="mb-0">{{ action }} Fixture Profile</h5>
                </div>
                <div class="card-body p-4">
                    <form action="" method="post">
                        <div class="row g-3">
                            <!-- Basic Info -->
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Internal Display Name</label>
                                <input type="text" name="name" value="{{ fixture.name if fixture }}" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Internal Model Name</label>
                                <input type="text" name="model_name" value="{{ fixture.model_name if fixture }}" class="form-control" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Factory Model Name</label>
                                <input type="text" name="factory_model_name" value="{{ fixture.factory_model_name if fixture }}" class="form-control">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">SKU</label>
                                <input type="text" name="sku" value="{{ fixture.sku if fixture }}" class="form-control">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Category</label>
                                <select name="type_id" class="form-select" required>
                                    <option value="">Select Category...</option>
                                    {% for t in types %}
                                    <option value="{{ t.id }}" {% if fixture and fixture.type_id == t.id %}selected{% endif %}>{{ t.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <hr class="my-4">

                            <!-- Specs -->
                            <div class="col-md-3">
                                <label class="form-label">Power (Watts)</label>
                                <input type="number" name="power_watts" value="{{ fixture.power_watts if fixture }}" class="form-control">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">IP Rating</label>
                                <input type="text" name="ip_rating" value="{{ fixture.ip_rating if fixture }}" class="form-control" placeholder="e.g. IP65">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Color</label>
                                <input type="text" name="color" value="{{ fixture.color if fixture }}" class="form-control" placeholder="e.g. Black / RGBW">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Beam Angle</label>
                                <input type="text" name="beam_angle" value="{{ fixture.beam_angle if fixture }}" class="form-control">
                            </div>

                            <hr class="my-4">

                            <!-- Commercials -->
                            <div class="col-md-3">
                                <label class="form-label">Supplier/Vendor</label>
                                <select name="supplier_id" class="form-select">
                                    <option value="">Select Supplier...</option>
                                    {% for s in suppliers %}
                                    <option value="{{ s.id }}" {% if fixture and fixture.supplier_id == s.id %}selected{% endif %}>{{ s.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Cost (RMB)</label>
                                <input type="number" step="0.01" name="cost" value="{{ fixture.cost if fixture }}" class="form-control">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Price (SGD)</label>
                                <input type="number" step="0.01" name="price_sgd" value="{{ fixture.price_sgd if fixture }}" class="form-control">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Price (USD)</label>
                                <input type="number" step="0.01" name="price_usd" value="{{ fixture.price_usd if fixture }}" class="form-control">
                            </div>

                            <div class="col-12 mt-4">
                                <label class="form-label">Technical Remarks / Notes</label>
                                <textarea name="remarks" class="form-control" rows="3">{{ fixture.remarks if fixture }}</textarea>
                            </div>
                        </div>

                        <div class="mt-4 pt-3 border-top d-flex justify-content-between">
                            <a href="{{ url_for('manage_fixtures') }}" class="btn btn-outline-secondary">Cancel</a>
                            <button type="submit" class="btn btn-primary px-5">Save Fixture Profile</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}